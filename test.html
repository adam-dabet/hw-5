<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* Add your styling here */
    .rating-container {
      display: inline-block;
      font-size: 24px;
    }

    .star {
      color: gray;
      cursor: pointer;
    }

    .star:hover,
    .star.active {
      color: gold;
    }

    #rating-message {
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>

<!-- Your simple HTML rating form -->
<form id="rating-form">
  <label for="rating">Rate us: </label>
  <input type="number" id="rating" name="rating" min="1" max="5">
  <input type="submit" value="Submit">
</form>

<!-- Your custom rating widget -->
<div id="rating-widget" class="rating-container">
  <!-- Stars will be dynamically added here -->
</div>

<div id="rating-message"></div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const ratingForm = document.getElementById("rating-form");
    const ratingInput = document.getElementById("rating");
    const ratingWidget = document.getElementById("rating-widget");
    const ratingMessage = document.getElementById("rating-message");

    const maxStars = Math.max(Math.min(parseInt(ratingInput.max), 10), 3);

    // Initialize stars
    for (let i = 1; i <= maxStars; i++) {
      const star = document.createElement("span");
      star.className = "star";
      star.textContent = "â˜…";
      star.dataset.value = i;
      ratingWidget.appendChild(star);
    }

    // Event listener for hovering and clicking on stars
    ratingWidget.addEventListener("mouseover", handleStarHover);
    ratingWidget.addEventListener("click", handleStarClick);

    function handleStarHover(event) {
      const hoveredStar = event.target;
      const value = hoveredStar.dataset.value;

      // Highlight stars up to the hovered star
      for (const star of ratingWidget.children) {
        star.classList.toggle("active", star.dataset.value <= value);
      }
    }

    function handleStarClick(event) {
      const clickedStar = event.target;
      const value = clickedStar.dataset.value;

      // Simulate sending the rating to a fake endpoint
      const fakeEndpointResponse = { rating: value, message: "Thank you for your feedback!" };
      console.log(fakeEndpointResponse);

      // Display a message based on the rating
      ratingMessage.textContent = value >= maxStars * 0.8 ? "Great job! We appreciate your positive feedback." : "We're sorry to hear that. We'll strive to improve.";

      // Reset the stars
      for (const star of ratingWidget.children) {
        star.classList.remove("active");
      }
    }

    // Prevent the form from submitting
    ratingForm.addEventListener("submit", function (event) {
      event.preventDefault();
    });
  });
</script>

</body>
</html>
